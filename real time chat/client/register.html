<!DOCTYPE html><html lang="en"><head>
<meta charset="UTF-8" /><title>Register</title>
<script src="https://www.google.com/recaptcha/api.js" async defer></script>
<link rel="stylesheet" href="style.css">
</head><body>
<div class="form-container">
  <h2>Register</h2>
  <form id="registerForm">
    <input id="username" placeholder="Username" required>
    <input id="password" type="password" placeholder="Password" required>
    <div class="g-recaptcha" data-sitekey="6Lcj8ZcrAAAAANVQkVaAIcjErF15bURIF9-53cA4"></div>
    <button type="submit">Register</button>
    <p id="msg"></p>
  </form>
  <a href="login.html">Login</a>
</div>
<script>
document.getElementById('registerForm').onsubmit = async e => {
  e.preventDefault();
  const user = document.getElementById('username').value;
  const pass = document.getElementById('password').value;
  const token = grecaptcha.getResponse();
  const res = await fetch('/api/register', {
    method: 'POST',
    headers: {'Content-Type':'application/json'},
    body: JSON.stringify({ username:user, password:pass, token })
  });
  const text = await res.text();
  document.getElementById('msg').textContent = text;
  if (res.ok) window.location.href = 'login.html';
  else grecaptcha.reset();
};
</script>
</body></html>
